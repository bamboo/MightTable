# MightTable

Metascript plugin for LightTable

# Installation

* Clone the project into LightTable plugins directory
```
cd ~/.config/LightTable/Plugins
git clone git@github.com:bamboo/MightTable.git
cd MightTable
```
* Install the meta-script package
```
lein npm install
```
* Open src/lt/plugins/metascript.cljs in LightTable and execute the command "Editor: build file or project"

# Usage

## Evaluating Expressions

Ctrl-Enter evaluates top level expressions.

Ctrl-Shift-Enter evaluates the whole file.

### Connecting to a node client

Open your metascript file and execute "Add Connection", select "NodeJS" and browse to a regular javascript file in your node project folder. Any file will do (including the one generated by the metascript compiler). I suggest to keep a file with the following code together with your metascript files:

```javascript
console.log('connected!');
```

If you're going to connect to multiple node clients at the same time each startup file in each project must have a different name.

## Jumping to errors

The plugin provides the commands *:metascript.jump-to-next-error* and *:metascript.jump-to-previous-error* for quick error navigation.

For convenience add the following to your *user.keymap*:

```Clojure
     :editor.metascript {"alt-pagedown" [:metascript.jump-to-next-error]
                         "alt-pageup" [:metascript.jump-to-previous-error]}
```

The commands use the *jump-stack* which means you can jump back with the usual Ctrl-, shortcut.

# TODO

* use compiled js path with node client

* original error location
 * if there's an original location display icon to jump to that location
 * to test write a macro that produces wrong code (coming from quoted code)

* error pad
 * show all errors


