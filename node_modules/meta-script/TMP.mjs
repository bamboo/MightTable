var fs = require 'fs'
var path = require 'path'

var package-root = file ->
  loop (var dir = path.dirname(file))
    do
      if (fs.exists-sync(path.join(dir, 'package.json')))
        do
          console.log <- 'EXISTS: ' + dir
          return dir
      else do
        var parent = path.dirname(dir)
        if (parent == dir) do
          console.log <- 'NONE: ' + parent
          undefined
        else do
          console.log <- 'NEXT: ' + parent
          next! parent

console.log(package-root 'TMP.mjs')
